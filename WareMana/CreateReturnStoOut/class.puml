@startuml
title Class Diagram - Create Return Stock Output

class StockOutputController {
    - _transactionService : ITransactionService
    - _transactionDetailService : ITransactionDetailService
    - _stockBatchService : IStockBatchService
    - _inventoryService : IInventoryService
    - _returnTransactionService : IReturnTransactionService
    - _returnTransactionDetailService : IReturnTransactionDetailService
    + ReturnOrder(transactionId: int, or: OrderRequest) : Task<IActionResult>
}

interface ITransactionService {
    + GetByIdAsync(id: int) : Task<Transaction>
    + UpdateAsync(entity: Transaction) : Task
}

interface ITransactionDetailService {
    + GetByTransactionId(id: int) : Task<List<TransactionDetailDto>>
    + UpdateAsync(entity: TransactionDetail) : Task
    + DeleteAsync(entity: TransactionDetail) : Task
}

interface IStockBatchService {
    + GetByProductIdForOrder(ids: List<int>) : Task<List<StockBatchDto>>
    + UpdateNoTracking(entity: StockBatch) : Task
}

interface IInventoryService {
    + GetEntityByWarehouseAndProductIdAsync(warehouseId: int, productId: int) : Task<Inventory>
    + UpdateNoTracking(entity: Inventory) : Task
}

interface IReturnTransactionService {
    + CreateAsync(entity: ReturnTransaction) : Task
}

interface IReturnTransactionDetailService {
    + CreateAsync(entity: ReturnTransactionDetail) : Task
}

class OrderRequest {
    + ListProductOrder : List<ProductOrder>
    + Reason : string
    + Note : string
    + TotalCost : decimal?
}

' Relationships
StockOutputController --> ITransactionService
StockOutputController --> ITransactionDetailService
StockOutputController --> IStockBatchService
StockOutputController --> IInventoryService
StockOutputController --> IReturnTransactionService
StockOutputController --> IReturnTransactionDetailService
StockOutputController ..> OrderRequest : uses

@enduml